(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{39:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(23),s=n.n(c),i=(n(39),n(11)),o=n(20),u=n(31),l=n(32),b=n(2),j=n(5),d=n(3),p=n.n(d),m=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=m,O="GET_USER",h="GET_SEARCH_VALUE",x="GET_INFO_SONGS",v=function(e){return{type:h,payload:e}},g=function(e){return{type:x,payload:e}},y=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(n){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:a=t.sent,r={name:a[0].collectionName,songInfos:a},n(v({artist:a[0].artistName})),n(g(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},N={user:""};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;return t.type===O?Object(b.a)(Object(b.a)({},e),{},{user:t.payload.user}):e},w={artist:""};var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;return t.type===h?Object(b.a)(Object(b.a)({},e),{},{artist:t.payload.artist}):e},I={name:"",songInfos:[]};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return t.type===x?Object(b.a)(Object(b.a)({},e),{},{name:t.payload.name,songInfos:t.payload.songInfos}):e},P=Object(o.combineReducers)({login:k,search:S,album:C}),E=Object(o.createStore)(P,Object(u.composeWithDevTools)(Object(o.applyMiddleware)(l.a))),U=n(7),F=n(8),T=n(18),J=n(9),A=n(10),D=n(6),L=n(14);var R=function(e){return e.length<3},_="user",V=function(e){return localStorage.setItem(_,JSON.stringify(e))},q=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},G=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(_));null===t&&(t={}),q(t)(e)}))},M=function(e){return new Promise((function(t){V(Object(b.a)(Object(b.a)({},{name:"",email:"",image:"",description:""}),e)),q("OK")(t)}))};function z(){return(z=Object(j.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,M({name:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e,t){return z.apply(this,arguments)},B=n(0);var H=function(){var e=Object(i.b)(),t=Object(a.useState)(""),n=Object(L.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(L.a)(s,2),u=o[0],l=o[1];return u?Object(B.jsx)(D.a,{to:"/search"}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("div",{className:"flex justify-between w-full p-3 header fixed",children:Object(B.jsx)("p",{className:"font-bold text-2xl text-white p-2 logo-title",children:"TrybeTunes"})}),Object(B.jsx)("div",{"data-testid":"page-login",className:"flex justify-center h-screen w-full",children:Object(B.jsx)("div",{className:"items-center m-auto container-login pt-28 pb-28 rounded-3xl",children:Object(B.jsxs)("form",{className:"row g-3 needs-validation",children:[Object(B.jsx)("h1",{className:"text-center font-bold",children:"Login"}),Object(B.jsx)("div",{className:"text-center",children:Object(B.jsxs)("label",{htmlFor:"login-name-input",className:"form-label",children:[Object(B.jsx)("p",{children:" Digite seu nome"}),Object(B.jsx)("input",{type:"text",name:"user",id:"login-name-input","data-testid":"login-name-input",value:r,onChange:function(e){return c(e.target.value)},className:"form-control form-control-sm rounded-3xl"})]})}),Object(B.jsx)("div",{className:"w-full text-center",children:Object(B.jsx)("button",{type:"submit","data-testid":"login-submit-button",disabled:R(r),onClick:function(t){K(t,r),e({type:O,payload:{user:r}}),l(!0)},className:"btn btn-primary m-auto",children:"Enviar"})})]})})})]})},W=n(17),Q=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(B.jsx)("p",{children:"Carregando..."})}}]),n}(a.Component),X=Q;function Y(e){var t=e.loading,n=e.location.pathname,a="btn2-active",r=Object(i.c)((function(e){return e.login.user})),c=localStorage.getItem("user");return Object(B.jsxs)("header",{"data-testid":"header-component",className:"",children:[Object(B.jsxs)("div",{className:"flex justify-between w-full p-3 header",children:[Object(B.jsx)("p",{className:"font-bold text-2xl text-white p-2 logo-title",children:"TrybeTunes"}),t?Object(B.jsx)(X,{}):Object(B.jsx)("p",{"data-testid":"header-user-name",className:"text-white align-middle m-0 self-center",children:r||JSON.parse(c).name||"User Test"})]}),Object(B.jsxs)("nav",{className:"grid grid-cols-3 pb-3",children:[Object(B.jsx)(W.b,{"data-testid":"link-to-search",to:"/search",className:"btn2\n          p-3 text-center ".concat("/search"===n&&a),children:Object(B.jsx)("button",{type:"button",children:"Pesquisa"})}),Object(B.jsx)(W.b,{"data-testid":"link-to-favorites",to:"/favorites",className:"btn2\n          p-3 text-center ".concat("/favorites"===n&&a),children:Object(B.jsx)("button",{type:"button",children:"Favoritos"})}),Object(B.jsx)(W.b,{"data-testid":"link-to-profile",to:"/profile",className:"btn2\n          p-3 text-center ".concat("/profile"===n&&a),children:Object(B.jsx)("button",{type:"button",children:"Perfil"})})]})]})}Y.defaultProps={loading:!0,location:{pathname:"/search"}};var Z=Y,$=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a,r,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=$;function te(){return(te=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(e){return te.apply(this,arguments)},ae=Object(a.createContext)(),re=ae.Provider;ae.Consumer;function ce(e){var t=Object(a.useState)(!1),n=Object(L.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),i=Object(L.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(""),b=Object(L.a)(l,2),j={promiseResolve:r,setPromiseResolve:c,albumList:o,setAlbumList:u,searchValue:b[0],setSearchValue:b[1]},d=e.children;return Object(B.jsx)(re,{value:j,children:d})}var se=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props.albumObject,t=e.artistName,n=e.collectionId,a=e.collectionName,r=e.artworkUrl100;return Object(B.jsx)("div",{className:"card shadow-lg bg-body w-full",children:Object(B.jsxs)(W.b,{"data-testid":"link-to-album-".concat(n),to:"/album/".concat(n),className:"text-decoration-none",children:[Object(B.jsx)("img",{src:r,alt:t,className:"card-img-top"}),Object(B.jsxs)("div",{className:"card-body",children:[Object(B.jsx)("h3",{className:"card-title cart-title-customized mb-2",children:a}),Object(B.jsx)("h1",{className:"card-title cart-title-customized mb-3 font-bold text-xl text-muted",children:t})]})]})})}}]),n}(a.Component),ie=se;function oe(){var e=Object(a.useContext)(ae),t=e.searchValue,n=e.promiseResolve,r=e.albumList;return n&&0===r.length?Object(B.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"}):n?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("h1",{className:"font-bold text-2xl p-4",children:"Resultado de \xe1lbuns de: ".concat(t)}),Object(B.jsx)("div",{className:"container-cards w-full",children:r.map((function(e){return Object(B.jsx)(ie,{albumObject:e},e.collectionId)}))})]}):null}var ue=function(e){var t=Object(a.useContext)(ae),n=t.searchValue,r=t.setPromiseResolve,c=t.setAlbumList,s=t.setSearchValue,o=Object(i.b)(),u=Object(a.useState)(!1),l=Object(L.a)(u,2),d=l[0],m=l[1],f=!0;n.length>1&&(f=!1);var O=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,ne(n);case 3:t=e.sent,r(!0),m(!1),c(t),o(v({name:n}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsxs)("div",{"data-testid":"page-search",className:"container-fluid p-0 w-screen",onSubmit:function(e){return e.preventDefault()},children:[Object(B.jsx)(Z,Object(b.a)(Object(b.a)({},e),this)),Object(B.jsxs)("form",{className:"flex gap-4 justify-center container_form",children:[Object(B.jsx)("input",{"data-testid":"search-artist-input",type:"text",name:"searchValue",placeholder:"search",value:n,onChange:function(e){var t=e.target;return s(t.value)},className:"form-control form-control-sm rounded-3xl input-search"}),Object(B.jsx)("button",{"data-testid":"search-artist-button",type:"submit",disabled:f,onClick:O,className:"d-none d-sm-block btn btn-primary",children:"Pesquisar"})]}),Object(B.jsx)("section",{className:"w-screen",children:d?Object(B.jsx)(X,{}):Object(B.jsx)(oe,{})})]})},le=n.p+"static/media/play.65864fd4.svg",be=n.p+"static/media/stop.1e0abca2.svg",je=n(34),de="favorite_songs";JSON.parse(localStorage.getItem(de))||localStorage.setItem(de,JSON.stringify([]));var pe=function(){return JSON.parse(localStorage.getItem(de))},me=function(e){return localStorage.setItem(de,JSON.stringify(e))},fe=function(e){return function(t){setTimeout((function(){t(e)}),500)}},Oe=function(){return new Promise((function(e){var t=pe();fe(t)(e)}))},he=function(e){return new Promise((function(t){if(e){var n=pe();me([].concat(Object(je.a)(n),[e]))}fe("OK")(t)}))},xe=function(e){return new Promise((function(t){var n=pe();me(n.filter((function(t){return t.trackId!==e.trackId}))),fe("OK")(t)}))};function ve(){return(ve=Object(j.a)(p.a.mark((function e(t){var n,a,r,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.trackId,a=t.trackName,r=t.action,c=t.previewUrl,s=t.loading,i={previewUrl:c,trackName:a,trackId:n},!s){e.next=4;break}return e.abrupt("return",Object(B.jsx)(X,{}));case 4:if(!r.target.checked){e.next=7;break}return e.next=7,he(i);case 7:if(!1!==r.target.checked){e.next=10;break}return e.next=10,xe(i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){var t=e.param,n=Object(a.useState)(!1),r=Object(L.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(!1),u=Object(L.a)(o,2),l=u[0],b=u[1],j=Object(i.c)((function(e){return e.album.songInfos})),d=Object(a.useState)(""),p=Object(L.a)(d,2),m=p[0],f=p[1],O=Object(a.useMemo)((function(){return new Audio(m)}),[m]),h=JSON.parse(localStorage.getItem("favorite_songs"));Object(a.useEffect)((function(){return c?O.play():O.pause()}),[O,c]);return(t?h:j)?("favorites"===t?h:j).map((function(e,n){var a=e.trackId,r=e.trackName,i=e.previewUrl;return(t?n>=0:n>0)&&Object(B.jsx)("hr",{})&&Object(B.jsxs)("section",{children:[(t?0===n:1===n)&&Object(B.jsx)("hr",{}),Object(B.jsxs)("div",{className:"container-songs",children:[Object(B.jsx)("span",{className:"self-center border-r-2"}),Object(B.jsx)("span",{className:"absolute self-center text-center ml-1",children:t?n+1:n}),Object(B.jsx)("p",{className:"cart-title-customized text-center",children:r}),Object(B.jsxs)("label",{htmlFor:"checkbox-music-".concat(a),className:"text-center",children:[Object(B.jsx)("input",{onChange:function(e){b(!0),function(e){ve.apply(this,arguments)}({trackId:a,trackName:r,action:e,previewUrl:i,loading:l}),b(!1)},type:"checkbox",id:a,"data-testid":"checkbox-music-".concat(a)}),"Favoritar"]}),Object(B.jsx)("button",{type:"button",onClick:function(){return function(e){c&&O.pause(),f(e),s(!c)}(i)},className:"self-center icon-audio m-auto",children:Object(B.jsx)("img",{src:c&&m===i?be:le,alt:"",className:"self-center"})})]},n),Object(B.jsx)("hr",{})]},n)})):Object(B.jsx)(X,{})}ge.defaultProps={param:""};var ye=ge;var Ne=function(e){var t=Object(D.g)().params.id,n=Object(i.c)((function(e){return e.search.artist})),r=Object(i.c)((function(e){return e.album.name})),c=Object(i.b)(),s=Object(a.useCallback)(Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(y(t)));case 1:case"end":return e.stop()}}),e)}))),[c,t]);return Object(a.useEffect)((function(){s()}),[s,t]),Object(B.jsxs)("div",{"data-testid":"page-album",children:[Object(B.jsx)(Z,Object(b.a)(Object(b.a)({},e),this)),Object(B.jsxs)("div",{className:"pb-5 pl-7 pr-7",children:[Object(B.jsx)("h1",{className:"font-bold text-1xl m-0 p-1",children:"Album:"}),Object(B.jsx)("h3",{"data-testid":"album-name",className:"font-bold text-1xl m-0",children:r}),Object(B.jsx)("h2",{"data-testid":"artist-name",className:"font-semibold text-xl pb-3 pl-5 text-muted underline",children:"by ".concat(n)}),Object(B.jsx)("div",{children:Object(B.jsx)(ye,{})})]})]})},ke=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(B.jsxs)("div",{"data-testid":"page-favorites",children:[Object(B.jsx)(Z,Object(b.a)(Object(b.a)({},this.props),this)),Object(B.jsx)("h1",{className:"font-bold text-1xl m-0 pb-7 pt-1 text-center",children:"Favorites"}),Object(B.jsx)("div",{className:"pb-5 pl-7 pr-7",children:Object(B.jsx)("section",{children:Object(B.jsx)(ye,{param:"favorites"})})})]})}}]),n}(a.Component),we=ke,Se=n.p+"static/media/profile-icon.fb20c290.svg",Ie=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(B.jsxs)("div",{"data-testid":"page-profile",children:[Object(B.jsx)(Z,Object(b.a)(Object(b.a)({},this.props),this)),Object(B.jsx)("h1",{className:"font-bold text-1xl m-0 pb-7 pt-1 text-center",children:"Profile"}),Object(B.jsxs)("section",{className:"p-5",children:[Object(B.jsxs)("div",{className:"flex justify-between pb-5",children:[Object(B.jsx)("img",{src:Se,alt:"profile icon",className:"w-28 rounded-full bg-gray-700"}),Object(B.jsx)("button",{type:"button",className:"btn btn-outline-danger h-10 self-center",children:"Editar perfil"})]}),Object(B.jsx)("h4",{className:"font-bold",children:"Nome"}),Object(B.jsx)("p",{className:"text-muted",children:"User"}),Object(B.jsx)("h4",{className:"font-bold",children:"E-mail"}),Object(B.jsx)("p",{className:"text-muted",children:"email@gmail.com"}),Object(B.jsx)("h4",{className:"font-bold",children:"Descri\xe7\xe3o"}),Object(B.jsx)("p",{className:"text-muted",children:"Lorem ipsum pulvinar viverra ante leo etiam placerat ipsum congue justo nec vitae leo urna, amet tincidunt aptent neque primis massa lectus purus interdum class conubia semper. venenatis dapibus ultrices morbi sociosqu elementum nec interdum risus, donec in velit auctor cursus turpis facilisis torquenta, scelerisque magna in nam risus fermentum justo."})]})]})}}]),n}(a.Component),Ce=Ie,Pe=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(B.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(B.jsx)(Z,Object(b.a)(Object(b.a)({},this.props),this)),Object(B.jsx)("h1",{children:"ProfileEdit"})]})}}]),n}(a.Component),Ee=Pe,Ue=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(B.jsx)("div",{"data-testid":"page-not-found",children:Object(B.jsx)("h1",{children:"NotFound"})})}}]),n}(a.Component),Fe=Ue;function Te(){return Je.apply(this,arguments)}function Je(){return(Je=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,n=t.name,this.setState({username:n,loading:!1});case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ae(e){return De.apply(this,arguments)}function De(){return(De=Object(j.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.loading,this.setState({loading:!0}),!n){e.next=4;break}return e.abrupt("return",Object(B.jsx)(X,{}));case 4:return e.next=6,Oe();case 6:a=e.sent,this.setState({loading:!1,favorites:a});case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Le(){return Re.apply(this,arguments)}function Re(){return(Re=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.state.favorites.forEach((function(e){var t=e.trackId,n=document.getElementById(t);n&&(n.checked="true")}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n(48),n(49);var _e=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this)).state={favorites:[],redirect:!1},e.getUsermame=Te.bind(Object(T.a)(e)),e.getArtistInfos=ne.bind(Object(T.a)(e)),e.recoverFavorites=Ae.bind(Object(T.a)(e)),e.getFavoriteList=Le.bind(Object(T.a)(e)),e}return Object(F.a)(n,[{key:"componentDidMount",value:function(){this.getUsermame(),this.recoverFavorites(Object(b.a)({},this.props))}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.favorites;t.favorites!==n&&this.getFavoriteList()}},{key:"render",value:function(){var e=this;return Object(B.jsx)(ce,{children:Object(B.jsxs)(D.d,{children:[Object(B.jsx)(D.b,{exact:!0,path:"/",component:H}),Object(B.jsx)(D.b,{exact:!0,path:"/search",component:ue}),Object(B.jsx)(D.b,{exact:!0,path:"/album/:id",component:Ne}),Object(B.jsx)(D.b,{exact:!0,path:"/favorites",render:function(t){return Object(B.jsx)(we,Object(b.a)(Object(b.a)(Object(b.a)({},e),e.state),t))}}),Object(B.jsx)(D.b,{exact:!0,path:"/profile",render:function(t){return Object(B.jsx)(Ce,Object(b.a)(Object(b.a)(Object(b.a)({},e),e.state),t))}}),Object(B.jsx)(D.b,{exact:!0,path:"/profile/edit",render:function(){return Object(B.jsx)(Ee,Object(b.a)(Object(b.a)({},e),e.state))}}),Object(B.jsx)(D.b,{component:Fe})]})})}}]),n}(a.Component);s.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(W.a,{basename:"/project-trybetunes",children:Object(B.jsx)(i.a,{store:E,children:Object(B.jsx)(_e,{})})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.0e172018.chunk.js.map